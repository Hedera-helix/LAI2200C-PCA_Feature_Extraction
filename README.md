# Features extraction from the LAI2200C Plant Canopy Analyzer

## Abstract
Leaf area index (LAI) plays an important role in land-surface models to describe the energy, carbon, and water fluxes between the soil and canopy vegetation. Indirect ground LAI measurements, such as using the LAI2200C Plant Canopy Analyzer (PCA), can not only increase the measurement efficiency but also protect the vegetation compared with the direct and destructive ground LAI measurement. Additionally, indirect measurements provide opportunities for remote-sensing-based LAI monitoring. This project focuses on the extraction of several features observed using the LAI2200C PCA because the extracted features can help to explore the relationship between the ground measurements and remote sensing data. Although FV2200 software can provide convenient data calculation, data visualization, etc., it cannot generate features such as time, coordinates, and LAI from the data log for deeper exploration, especially when facing a large amount of collected data that needs to process. In order to increase efficiency, this project developed a simple python script for feature extraction, and demo data are provided.

Three folders are included in this project: “1_Data,” “2_Script,” and “3_ Result.” the single PDF file, called “ReadME.pdf” (the pdf document you are reading now), briefly explains how users can duplicate our processes or even develop the scripts. Users must learn how to use the required libraries successfully on their own. Details about each folder are presented in the sections below.
## 1_Data
One TXT file and one XLSX file are listed in this folder:
“PCA-Analyzer.TXT” is the raw data gained from the data log (2200C PCA). Mahyar Aboutalebi developed simple MATLAB code for feature extraction based on the raw data. Details can be found at https://github.com/Mahyarona/LAI-2200C.
For some situations, the features gained from the raw data cannot be used directly. For example, users may require the LAI calculation based on 4 of the 5 rings of the fisheye lens (White et al. 2018). Considering this, the FV2200 software (https://www.licor.com/env/products/leaf_area/LAI-2200C/software) can be used to process the raw data based on user requirements. Once users have finished the required calculation, the content viewing in the software can be copied and pasted into the EXCEL spreadsheet. The “PCA-Analyzer-Manual.xlsx” EXCEL file corresponds to the raw data file. Details about the EXCEL content are presented below.
Four sheets are included in “PCA-Analyzer-Manual.xlsx.” The 1st sheet called “As Read” is obtained by copying the data from the same sheet name viewed in the FV2200. The process is the same for the 2nd and the 3rd sheets in the XLSX file. The last sheet called “Current_new” in the XLSX file is copied from the main part of the 2nd sheet (below the “###Observations”). The column names must be added manually since the script reads the data based on these names.
## 2_Scripts
This folder contains only one script called “PCA_LAI_Extraction.ipynb.” Explanation of the script is located inside the content.
## 3_Results
“Result.csv” is the result generated by the script. This file contains 5 features: (1) “ID” is the number shown in the column called “B_Obs” in the “Gap Fractions” sheet, (2) “LAI” is the value calculated based on user requirements via the FV2200, (3) “Time” includes the date and time of the measurement, (4) “Lat” is the latitude of the ground measurements, and (5) “Lon” is the longitude of the ground measurements.

## Please cite the paper below
Gao, R., A. F. Torres-Rua (2021) Features extraction from the LAI2200C Plant Canopy Analyzer, HydroShare, https://doi.org/10.4211/hs.6d0c4a14289742d0951ba5ab9eca7dc0<br>

GAO, R., Torres-Rua, A., Nassar, A., Alfieri, J., Aboutalebi, M., Hipps, L., Ortiz, N.B., Mcelrone, A.J., Coopmans, C., Kustas, W., White, W., McKee, L., Alsina, M.M., Dokoozlian, N., Sanchez, L., Prueger, J.H., Nieto, H., Agam, N. (2021) "Evapotranspiration partitioning assessment using a machine-learning-based leaf area index and the two-source energy balance model with sUAV information," Proc. SPIE 11747, Autonomous Air and Ground Sensing Systems for Agricultural Optimization and Phenotyping VI, 117470N (12 April 2021); https://doi.org/10.1117/12.2586259

## Gentle reminder
[LAI-2200C](https://github.com/Mahyarona/LAI-2200C) is a MATLAB version code built by Dr. [Aboutalebi](https://scholar.google.com/citations?user=6mqPhOMAAAAJ&hl=en). Please feel free to explore either the Python or MATLAB version code.<br>
Any issues are welcome to shot emails to [Rui Gao](https://scholar.google.com/citations?user=t0JFmREAAAAJ&hl=en) at Rui.Gao@usu.edu.

